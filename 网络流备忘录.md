## 网络流

- 限制点的流量：拆点，两点间连边的限制为点流量限制
- DAG最小路径覆盖：拆点，每个点的流量下限为1，跑有上下界最小流
- 有若干形如$a[b_1]+a[b_2]+\cdots+a[b_k]\in[L_i,R_i]$的限制，限制可分为两组，每个$a[i]$在同一组中只出现一次，且每个$a[i]$取值范围在$[l_i,r_i]$
    - 每个$a[i]$建两个点，中间的边按照它的取值范围设定上下界
    - 对于第一组中的限制，建点，从源点到这个点连一条$[L_i,R_i]$的边，从这个点向所有受限制的点连一条容量无限的边
    - 对于第二组中的限制，建点，从这个点到汇点连一条$[L_i,R_i]$的边，从每个受限制的点连到这个点一条容量无限的边
    - [P4486 [BJWC2018]Kakuro](https://www.luogu.com.cn/problem/P4486)
- 二分图相关：
    - 最小点覆盖=最大匹配（最小割）
    - 最小边覆盖=N-最大匹配（除了匹配，每条边覆盖一个点）
    - 最大独立集=N-最大匹配（除了最小点覆盖的点）
- 最大权闭合子图：有$n$个点，有$m$个限制$(u,v)$表示取点$u$就一定要取点$v$，每个点有一个权值$w_i$（可正可负），求一个满足限制的选点方案使选点权值和最大
    - 对每个限制$(u,v)$，连一条$(u,v,\infin)$的边，对每个$w_i\geq 0$的点，先给答案加上$w_i$，再连边$(S,i,w_i)$，若$w_i<0$，则连边$(i,T,|w_i|)$，最后答案减去最大流
    - 证明（感性）：最小割
    - [CF1146G Zoning Restrictions](https://www.luogu.com.cn/problem/CF1146G)
    - 正权点同时连向若干个点等价于这些点全选时权值增加
    - 对于两个点，通过上述方法拼上改变两点本身的权值，可以实现：
		|u\v| 0 | 1 |
		|:-:|:-:|:-:|
		| 0 | + | - |
		| 1 | - | + |
	- [P8215 [THUPC2022 初赛] 分组作业](https://www.luogu.com.cn/problem/P8215)
- 切糕模型
	- **upd**：切糕模型可以转化为最大权闭合子图
		- $(u,v)\to(u,v-1)$
		- 限制$x\ge y+k$：$(y,i)\to (x,i+k)$
		- 钦定选$(u,1)$：$S\to (u,1)$（dfs删点常数会更优一些）
		- $w'(u,v)=w(u,v)-w(u,v-1)$
   - 以下是经典做法：
	- ![](https://cdn.luogu.com.cn/upload/image_hosting/gnkt9wta.png) （盗题解图）
	- 对于每个变量，每种取值都开一个点
	- 连边：
    	- $S\to (x,1),flow=\infin$
    	- $(x,lim+1)\to T,flow=\infin$
    	- $(x,i)\to (x,i+1),flow=weight(x,i)$
    	- $(x,i+1)\to (x,i),flow=\infin$
    	- $\forall u\geq v+k,(v,i)\to (u,i+k),flow=\infin$
  	- 做最小割，显然每个变量$S$只可达一个前缀，只割一条边，若割$(x,i)\to(x,i+1)$，则代表$x$取值为$i$
	- [P3227 [HNOI2013]切糕](https://www.luogu.com.cn/problem/P3227)


- 平面图最小割转最短路：（如果原图是有向图，对偶图中的边只能全是从原图一条边的左边到右边或全是从右边到左边）[P4001 [ICPC-Beijing 2006]狼抓兔子](https://www.luogu.com.cn/problem/P4001?contestId=38905)
